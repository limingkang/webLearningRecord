<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>docker | 前端学习</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="努力学习">
    <link rel="preload" href="/webLearningRecord/assets/css/0.styles.32aa171d.css" as="style"><link rel="preload" href="/webLearningRecord/assets/js/app.bdc4d5ac.js" as="script"><link rel="preload" href="/webLearningRecord/assets/js/2.1a231426.js" as="script"><link rel="preload" href="/webLearningRecord/assets/js/27.39bdc05b.js" as="script"><link rel="prefetch" href="/webLearningRecord/assets/js/10.6c45162c.js"><link rel="prefetch" href="/webLearningRecord/assets/js/11.f477fe3a.js"><link rel="prefetch" href="/webLearningRecord/assets/js/12.719839a4.js"><link rel="prefetch" href="/webLearningRecord/assets/js/13.2e776131.js"><link rel="prefetch" href="/webLearningRecord/assets/js/14.6961d267.js"><link rel="prefetch" href="/webLearningRecord/assets/js/15.94790cc9.js"><link rel="prefetch" href="/webLearningRecord/assets/js/16.5c5eee38.js"><link rel="prefetch" href="/webLearningRecord/assets/js/17.025ef091.js"><link rel="prefetch" href="/webLearningRecord/assets/js/18.ef4a8780.js"><link rel="prefetch" href="/webLearningRecord/assets/js/19.ec38cef5.js"><link rel="prefetch" href="/webLearningRecord/assets/js/20.f6711983.js"><link rel="prefetch" href="/webLearningRecord/assets/js/21.0cef24fe.js"><link rel="prefetch" href="/webLearningRecord/assets/js/22.9224a013.js"><link rel="prefetch" href="/webLearningRecord/assets/js/23.ec789df6.js"><link rel="prefetch" href="/webLearningRecord/assets/js/24.3bce65fe.js"><link rel="prefetch" href="/webLearningRecord/assets/js/25.f4d74d85.js"><link rel="prefetch" href="/webLearningRecord/assets/js/26.70ee71fc.js"><link rel="prefetch" href="/webLearningRecord/assets/js/28.31277bb6.js"><link rel="prefetch" href="/webLearningRecord/assets/js/29.97b7aecc.js"><link rel="prefetch" href="/webLearningRecord/assets/js/3.9f1b9f7a.js"><link rel="prefetch" href="/webLearningRecord/assets/js/30.bcf3c482.js"><link rel="prefetch" href="/webLearningRecord/assets/js/31.e07b317a.js"><link rel="prefetch" href="/webLearningRecord/assets/js/32.1352871c.js"><link rel="prefetch" href="/webLearningRecord/assets/js/33.f98a7f1c.js"><link rel="prefetch" href="/webLearningRecord/assets/js/34.3797f037.js"><link rel="prefetch" href="/webLearningRecord/assets/js/4.217c5e32.js"><link rel="prefetch" href="/webLearningRecord/assets/js/5.bd81a106.js"><link rel="prefetch" href="/webLearningRecord/assets/js/6.d3f0121d.js"><link rel="prefetch" href="/webLearningRecord/assets/js/7.c3e5ebfe.js"><link rel="prefetch" href="/webLearningRecord/assets/js/8.62631f20.js"><link rel="prefetch" href="/webLearningRecord/assets/js/9.094f8da5.js">
    <link rel="stylesheet" href="/webLearningRecord/assets/css/0.styles.32aa171d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webLearningRecord/" class="home-link router-link-active"><!----> <span class="site-name">前端学习</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/limingkang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/limingkang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active"><span>浏览器工作原理和实践</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/browser-theory/chromeConstruct.html" class="sidebar-link">chrome架构</a></li><li><a href="/webLearningRecord/browser-theory/other.html" class="sidebar-link">缓存和安全</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active"><span>微前端架构</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/web-consttruct/singleSpa.html" class="sidebar-link">single-spa方式实现</a></li><li><a href="/webLearningRecord/web-consttruct/mySingleSpa.html" class="sidebar-link">自己实现一个微前端</a></li><li><a href="/webLearningRecord/web-consttruct/mircoapp.html" class="sidebar-link">microapp</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active"><span>前端性能监控</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/web-observe/web-observe.html" class="sidebar-link">构建前端性能监控</a></li><li><a href="/webLearningRecord/web-observe/user-behavior.html" class="sidebar-link">用户行为录制</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active"><span>vue2源码分析</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/vue-analyze/vue2.html" class="sidebar-link">初始化过程</a></li><li><a href="/webLearningRecord/vue-analyze/components.html" class="sidebar-link">组件化</a></li><li><a href="/webLearningRecord/vue-analyze/reactive.html" class="sidebar-link">响应式原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active"><span>包管理</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/bundle/analysize.html" class="sidebar-link">rollup</a></li><li><a href="/webLearningRecord/bundle/pnpm.html" class="sidebar-link">pnpm</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active"><span>vite</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/vite/prelearn.html" class="sidebar-link">基础知识</a></li><li><a href="/webLearningRecord/vite/analysize.html" class="sidebar-link">源码分析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active"><span>react浅析</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/react/react.html" class="sidebar-link">react初探</a></li><li><a href="/webLearningRecord/react/two.html" class="sidebar-link">react架构实现</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active open"><span>经常忘记</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/forget/one.html" class="sidebar-link">JavaScript</a></li><li><a href="/webLearningRecord/forget/two.html" class="sidebar-link">TypeScript</a></li><li><a href="/webLearningRecord/forget/three.html" class="sidebar-link">CSS</a></li><li><a href="/webLearningRecord/forget/four.html" class="sidebar-link">Node</a></li><li><a href="/webLearningRecord/forget/five.html" class="active sidebar-link">经常使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webLearningRecord/forget/five.html#docker" class="sidebar-link">docker</a></li><li class="sidebar-sub-header"><a href="/webLearningRecord/forget/five.html#shell脚本" class="sidebar-link">shell脚本</a></li><li class="sidebar-sub-header"><a href="/webLearningRecord/forget/five.html#快速装机必备" class="sidebar-link">快速装机必备</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active"><span>笔试题</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/algorithm/one.html" class="sidebar-link">算法</a></li><li><a href="/webLearningRecord/algorithm/two.html" class="sidebar-link">手写函数</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/webLearningRecord/" class="sidebar-heading clickable router-link-active"><span>随笔</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webLearningRecord/think/mess.html" class="sidebar-link">杂谈</a></li><li><a href="/webLearningRecord/think/css.html" class="sidebar-link">css方法论</a></li><li><a href="/webLearningRecord/think/svelte.html" class="sidebar-link">svelte</a></li><li><a href="/webLearningRecord/think/frame.html" class="sidebar-link">框架</a></li><li><a href="/webLearningRecord/think/outer.html" class="sidebar-link">基础文章</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="docker"><a href="#docker" class="header-anchor">#</a> docker</h2> <h3 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h3> <p>虽然用户可以通过<strong>虚拟机</strong>还原软件的原始环境。但这个方案有几个缺点</p> <ul><li>虚拟机会独占一部分内存和硬盘空间。它运行的时候，其他程序就不能使用这些资源了。哪怕虚拟机里面的应用程序，真正使用的内存只有 1MB，虚拟机依然需要几百 MB 的内存才能运行</li> <li>虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录</li> <li>启动操作系统需要多久，启动虚拟机就需要多久。可能要等几分钟，应用程序才能真正运行</li></ul> <p>由于虚拟机存在这些缺点，Linux 发展出了另一种虚拟化技术：Linux 容器（Linux Containers，缩写为 LXC）。Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔
离。或者说，在正常进程的外面套了一个保护层。对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现与底层系统的隔离。由于容器是进程级别的，相比虚拟机有很多优势</p> <ul><li>容器里面的应用，直接就是底层系统的一个进程，而不是虚拟机内部的进程。所以，启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多</li> <li>容器只占用需要的资源，不占用那些没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源</li> <li>容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多</li></ul> <p>总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小得多</p> <p><strong>Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口</strong>。它是目前最流行的 Linux 容器解决方案</p> <p>Docker 的主要用途，目前有三大类</p> <ol><li>提供一次性的环境。比如，本地测试他人的软件、持续集成的时候提供单元测试和构建的环境</li> <li>提供弹性的云服务。因为 Docker 容器可以随开随关，很适合动态扩容和缩容</li> <li>组建微服务架构。通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构</li></ol> <h3 id="image文件"><a href="#image文件" class="header-anchor">#</a> image文件</h3> <p><strong>Docker 把应用程序及其依赖，打包在 image 文件里面</strong>。只有通过这个文件，才能生成 Docker 容器。image 文件可以看作是容器的模板。Docker 根据 image 文件
生成容器的实例。同一个 image 文件，可以生成多个同时运行的容器实例</p> <p>image 是二进制文件。实际开发中，一个 image 文件往往通过继承另一个 image 文件，加上一些个性化设置而生成。举例来说，你可以在 Ubuntu 的 image 基础上，往
里面加入 Apache 服务器，形成你的 image</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 列出本机的所有 image 文件。</span>
$ docker image <span class="token function">ls</span>

<span class="token comment"># 删除 image 文件</span>
$ docker image <span class="token function">rm</span> <span class="token punctuation">[</span>imageName<span class="token punctuation">]</span>
</code></pre></div><p>image 文件是通用的，一台机器的 image 文件拷贝到另一台机器，照样可以使用。一般来说，为了节省时间，我们应该尽量使用别人制作好的 image 文件，而不是自
己制作。即使要定制，也应该基于别人的 image 文件进行加工，而不是从零开始制作</p> <p>为了方便共享，image 文件制作完成后，可以上传到网上的仓库。Docker 的官方仓库 Docker Hub 是最重要、最常用的 image 仓库。此外，出售自己制作的 image 文件也是可以的</p> <h3 id="容器文件"><a href="#容器文件" class="header-anchor">#</a> 容器文件</h3> <p><strong>image 文件生成的容器实例，本身也是一个文件，称为容器文件</strong>。也就是说，一旦容器生成，就会同时存在两个文件： image 文件和容器文件。而且关闭容器
并不会删除容器文件，只是容器停止运行而已</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 列出本机正在运行的容器</span>
$ docker container <span class="token function">ls</span>

<span class="token comment"># 列出本机所有容器，包括终止运行的容器</span>
<span class="token comment"># 输出结果之中，包括容器的 ID。很多地方都需要提供这个 ID，比如上一节终止容器运行的docker container kill命令</span>
$ docker container <span class="token function">ls</span> --all

<span class="token comment"># 终止运行的容器文件，依然会占据硬盘空间，可以使用命令删除</span>
$ docker container <span class="token function">rm</span> <span class="token punctuation">[</span>containerID<span class="token punctuation">]</span>
</code></pre></div><h3 id="dockerfile文件"><a href="#dockerfile文件" class="header-anchor">#</a> Dockerfile文件</h3> <p>它是一个文本文件，用来配置 image。Docker 根据 该文件生成二进制的 image 文件</p> <div class="language-dockerfile extra-class"><pre class="language-dockerfile"><code><span class="token comment"># FROM  &lt;image&gt;[:&lt;tag&gt; | @&lt;digest&gt;] [AS &lt;name&gt;]</span>
<span class="token comment"># FROM指定一个基础镜像，且必须为Dockerfile文件开篇的每个非注释行,至于image则可以是任何合理存在的image镜像</span>
<span class="token comment"># FROM可以在一个Dockerfile中出现多次，以便于创建混合的images。如果没有指定tag,latest将会被指定为要使用的基础镜像版本</span>
<span class="token comment"># AS name,可以给新的构建阶段赋予名称。该名称可用于后续FROM 和 COPY --from=&lt;name | index&gt;说明可以引用此阶段中构建的镜像</span>
<span class="token keyword">FROM</span> xxxxxxxxxxxxx/image<span class="token punctuation">-</span>base/node<span class="token punctuation">:</span>10.9.0<span class="token punctuation">-</span>jessie AS build<span class="token punctuation">-</span>env
<span class="token comment"># 将当前目录下的所有文件（除了.dockerignore排除的路径），都拷贝进入 image 文件的/app目录</span>
<span class="token keyword">COPY</span> . /app
<span class="token comment"># 指定接下来的工作路径为/app</span>
<span class="token keyword">WORKDIR</span> /app
<span class="token comment"># 在/app目录下，运行npm install命令安装依赖。注意，安装后所有的依赖，都将打包进入 image 文件</span>
<span class="token keyword">RUN</span> npm install <span class="token punctuation">-</span><span class="token punctuation">-</span>registry=https<span class="token punctuation">:</span>//registry.npm.taobao.org
<span class="token comment"># 将容器 3000 端口暴露出来， 允许外部连接这个端口</span>
<span class="token keyword">EXPOSE</span> 3000
<span class="token comment"># 执行健康检查 cmd命令在容器启动后执行</span>
<span class="token keyword">HEALTHCHECK</span> <span class="token keyword">CMD</span> curl <span class="token punctuation">-</span>f http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>$<span class="token punctuation">{</span>HTTP_PORT<span class="token punctuation">}</span>/ <span class="token punctuation">|</span><span class="token punctuation">|</span> exit 1
<span class="token comment"># 容器启动时会先走该sh文件</span>
<span class="token keyword">ENTRYPOINT</span> <span class="token punctuation">[</span><span class="token string">&quot;./entrypoint.sh&quot;</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="docker常用命令"><a href="#docker常用命令" class="header-anchor">#</a> docker常用命令</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 查看某个服务的状态</span>
docker <span class="token function">ps</span><span class="token operator">|</span><span class="token function">grep</span> <span class="token variable">$name</span>
<span class="token comment"># 查看所有容器</span>
docker <span class="token function">ps</span> -a
<span class="token comment"># 查看所有镜像</span>
docker images
<span class="token comment"># 停用某个服务</span>
docker <span class="token function">kill</span> <span class="token variable">$imageId</span>
<span class="token comment"># 删除本地docker镜像</span>
docker rmi -f <span class="token variable">$imageId</span>
<span class="token comment"># 查看docker中的变量</span>
docker inspect <span class="token variable">$imageId</span>
<span class="token comment"># 删除本地所有docker镜像</span>
docker rmi <span class="token variable"><span class="token variable">`</span>docker images -q<span class="token variable">`</span></span> -f
<span class="token comment"># 删除某个容器</span>
docker <span class="token function">rm</span> -f containerid
<span class="token comment"># 删除所有容器</span>
docker <span class="token function">rm</span> -f <span class="token variable"><span class="token variable">`</span>docker <span class="token function">ps</span> -a -q<span class="token variable">`</span></span>
<span class="token comment"># 进入docker内部查看nginx配置</span>
docker <span class="token builtin class-name">exec</span> -it <span class="token variable">$imageId</span> <span class="token function">bash</span>
docker <span class="token builtin class-name">exec</span> -it <span class="token variable">$imageId</span> <span class="token function">sh</span>
<span class="token comment"># 查看某个镜像的日志</span>
docker logs -f  --tail<span class="token operator">=</span><span class="token number">100</span> imageid
</code></pre></div><h3 id="docker-compose"><a href="#docker-compose" class="header-anchor">#</a> docker-compose</h3> <p>Compose 是用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一
个命令，就可以从 YML 文件配置中创建并启动所有服务</p> <p>Compose 使用的三个步骤：</p> <ol><li>使用 Dockerfile 定义应用程序的环境</li> <li>使用 docker-compose.yml 定义构成应用程序的服务，这样它们可以在隔离环境中一起运行</li> <li>最后，执行 docker-compose up 命令来启动并运行整个应用程序,如果你想在后台执行该服务可以加上 -d 参数</li></ol> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'2.1'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token comment"># 服务名</span>
  <span class="token key atrule">Studio</span><span class="token punctuation">:</span>
    <span class="token comment"># 依赖镜像</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token comment"># image: harbor.test.com/test/base_tengine:fb186ee7-20200103-0349</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>DEPLOY_CONTAINER<span class="token punctuation">}</span>
    <span class="token comment"># 当前HTTP_PORT映射到80</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> $<span class="token punctuation">{</span>HTTP_PORT<span class="token punctuation">}</span><span class="token punctuation">:</span><span class="token number">80</span>
    <span class="token key atrule">mem_limit</span><span class="token punctuation">:</span> 2048m
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./nginx.conf<span class="token punctuation">:</span>/etc/nginx/nginx.conf
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
</code></pre></div><p>代码是在构建时静态复制到容器中的，即通过Dockerfile文件中的COPY src /opt/src命令实现物理主机中的源码复制到容器中，这样在后
续物理主机src目录中代码的更改不会反应到容器中</p> <p>可以通过volumes 关键字实现物理主机目录挂载到容器中的功能（同时删除Dockerfile中的COPY指令，不需要创建镜像时将代码打包进镜
像，而是通过volums动态挂载，容器和物理host共享数据卷</p> <p>通过volumes（卷）将主机上的项目目录（compose_test/src）挂载到容器中的/opt/src目录下，允许您即时修改代码，而无需重新构建镜像</p> <h2 id="shell脚本"><a href="#shell脚本" class="header-anchor">#</a> shell脚本</h2> <p>获取本地ip的方法脚本：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">ifconfig</span> -a<span class="token operator">|</span><span class="token function">grep</span> inet<span class="token operator">|</span><span class="token function">grep</span> -v <span class="token number">127.0</span>.0.1<span class="token operator">|</span><span class="token function">grep</span> -v inet6<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>}'</span><span class="token operator">|</span><span class="token function">tr</span> -d <span class="token string">&quot;addr:&quot;</span><span class="token operator">|</span><span class="token function">head</span> -1
</code></pre></div><p>shift可以用来向左移动位置参数：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;参数值为 <span class="token variable">$1</span>, 参数个数为 <span class="token variable">$#</span>&quot;</span>
    <span class="token builtin class-name">shift</span>
<span class="token keyword">done</span>
</code></pre></div><p>Shell的名字 $0；第一个参数 $1；第二个参数 $2；第n个参数 $n；所有参数 $@ 或 $*；参数个数 $#</p> <p>expr命令是一个手工命令行计数器，用于在UNIX/LINUX下求表达式变量的值，一般用于整数值，也可用于字符串</p> <p>${BASH_SOURCE[0]}表示bash脚本的第一个参数（如果第一个参数是bash，表明这是要执行bash脚本，这时&quot;${BASH_SOURCE[0]}&quot;自动转换为第二个参数</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">DIR</span><span class="token operator">=</span><span class="token string">&quot;$( cd -P &quot;<span class="token variable"><span class="token variable">$(</span> <span class="token function">dirname</span> <span class="token string">&quot;<span class="token variable">${<span class="token environment constant">BASH_SOURCE</span><span class="token punctuation">[</span>0<span class="token punctuation">]</span>}</span>&quot;</span> <span class="token variable">)</span></span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">pwd</span> <span class="token punctuation">)</span>&quot;
<span class="token comment"># 第一条语句就是获取当前目录</span>
<span class="token comment"># 如果第一条语句顺利执行，就执行pwd显示当前目录，并将结果赋值给变量“DIR”</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">source</span> FileName
<span class="token comment"># 在当前bash环境下读取并执行FileName中的命令</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">while</span> <span class="token builtin class-name">read</span> line
<span class="token keyword">do</span>
   <span class="token function">sed</span> -e <span class="token string">&quot;s/\<span class="token variable">${SELF_IP}</span>/<span class="token variable">$SELF_IP</span>/g&quot;</span> 
   <span class="token comment"># 对file里面所有SELF_IP替换值</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> <span class="token function">file</span>
<span class="token comment"># read通过输入重定向，把file的第一行所有的内容赋值给变量line，循环体内的命令一般包含对变量line的处理；</span>
<span class="token comment"># 然后循环处理file的第二行、第三行。。。一直到file的最后一行</span>
</code></pre></div><h3 id="envsubst命令"><a href="#envsubst命令" class="header-anchor">#</a> envsubst命令</h3> <p>比如你现在有配置文件：decoder.conf里面有两个配置项写的是：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>THREAD_NUM:24
GPU_ID:0
</code></pre></div><p>现在你希望通过某个统一的配置来修改这些配置项，以免在部署的时候挨个去改动每个配置文件,那么可以如下操作：</p> <ol><li>写一个统一配置文件config.conf里面写:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">thread_num</span><span class="token operator">=</span><span class="token number">24</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">gpu_id</span><span class="token operator">=</span><span class="token number">0</span>
</code></pre></div><ol start="2"><li>将decoder.conf复制为decoder.conf.emplate,并将decoder.conf.template里面改为</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>THREAD_NUM:<span class="token variable">${thread_num}</span>
GPU_ID:<span class="token variable">${gpu_id}</span>
</code></pre></div><ol start="3"><li><p>在命令行中输入：<code>source config.conf</code></p></li> <li><p>在命令行中输入：<code>envsubst &lt; decoder.conf.template &gt; decoder.conf</code></p></li> <li><p>如果只想替换THREAD_NUM，不想替换GPU_ID，那就在命令行输入:</p></li></ol> <p><code>envsubst '${THREAD_NUM}' &lt; decoder.conf.template &gt; decoder.conf</code></p> <h2 id="快速装机必备"><a href="#快速装机必备" class="header-anchor">#</a> 快速装机必备</h2> <h3 id="首先安装我们需要的包-前端就是node-git-vscode"><a href="#首先安装我们需要的包-前端就是node-git-vscode" class="header-anchor">#</a> 首先安装我们需要的包,前端就是node git vscode</h3> <p><a href="http://nodejs.cn/download/" target="_blank" rel="noopener noreferrer">node 安装地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.git-scm.com/download/mac" target="_blank" rel="noopener noreferrer">git安装或者直接使用npm安装<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>下载vscode之后直接装好对应插件</p> <ol><li>ESlint</li> <li>Git history</li> <li>GitLens <code>查看git提交记录</code></li> <li>Vetur <code>vue 语法高亮、错误提示、自动格式化等的插件</code></li></ol> <p>特别的时候是，如果自动保存格式化失效的话，可以从新设置下，在preferences -&gt; settings 找到extensions里面的eslint的配置，可以进去编辑json文件,给个下面的例子，
但是不通版本可能配置不太一样</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;source.fixAll.eslint&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;vue&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;workbench.editor.enablePreview&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;files.autoSave&quot;</span><span class="token operator">:</span> <span class="token string">&quot;onFocusChange&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;explorer.confirmDelete&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;js/ts.implicitProjectConfig.experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint.codeAction.showDocumentation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;enable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dbaeumer.vscode-eslint&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;vscodeGoogleTranslate.preferredLanguage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;English&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来我们需要配置git的免密码登陆</p> <ol><li>本机执行：ssh-keygen -t rsa</li> <li>遇到提示，直接回车就OK，秘钥生成在用户的根目录的.ssh目录下。比如小白用户的/home/xiaobai/.ssh目录下</li> <li>复制/home/xiaobai/.ssh/id_rsa.pub文件到目标服务器的/home/login_user/.ssh目录下，并重命名为authorized_keys</li> <li>如果目标服务器上存在authorized_keys文件，请将id_rsa.pub文件内容追加到authorized_keys,如果不存在.ssh，执行：ssh-keygen -t rsa 生成</li></ol> <p>接下来终端oh-my-zsh安装，提供两个命令:</p> <p><code>sh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</code></p> <p><code>sh -c &quot;$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;</code></p> <p>记下淘宝镜像地址：<code>npm install --registry=https://registry.npm.taobao.org</code></p> <h3 id="node管理工具nvm"><a href="#node管理工具nvm" class="header-anchor">#</a> node管理工具nvm</h3> <p>推荐两个命令:</p> <p><code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash</code></p> <p><code>wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash</code></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webLearningRecord/forget/four.html" class="prev">
        Node
      </a></span> <span class="next"><a href="/webLearningRecord/algorithm/one.html">
        算法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/webLearningRecord/assets/js/app.bdc4d5ac.js" defer></script><script src="/webLearningRecord/assets/js/2.1a231426.js" defer></script><script src="/webLearningRecord/assets/js/27.39bdc05b.js" defer></script>
  </body>
</html>
